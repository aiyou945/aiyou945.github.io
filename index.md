# 哎呦的个人主页
初次见面，欢迎来到编程小白哎呦的个人主页！  
这个网页的内容可能会随时改动，主要分享的是哎呦的一些日常  
如果发现网站内容丢失请不要见怪^__^以下是网页索引，  
大家可以点击链接观看想看的内容  
## 网页索引
·【那些让你崩溃的编程题】：见下方文段  
·【教你手搓热门游戏-骗子酒馆】：[点击我进入](https://aiyou945.github.io/teach/liar.html)  
·【图片仓库】：[点击我进入](https://aiyou945.github.io/image)  
## 精彩推荐-那些让你崩溃的编程题
今天我们讨论的话题是———**那些让你崩溃的编程题**!  
那么，我们要谈论的第一道题，就是**洛谷的第P1828题**：香甜的黄油~  
## P1828 香甜的黄油
### 题目描述
[题目传送门](https://www.luogu.com.cn/problem/P1828)  
Farmer John 发现了做出全威斯康辛州最甜的黄油的方法：**糖**。  
把糖放在一片牧场上，他知道 N 只奶牛会过来舔它，这样就能做出~~能卖好价钱的超甜黄油~~。当然，他将付出额外的费用在**奶牛**上。  
Farmer John 很狡猾。像以前的 Pavlov，他知道他可以训练这些奶牛，让它们在听到铃声时去一个特定的牧场。他打算将糖放在那里然后下午发出铃声，以至他可以在晚上挤奶。  
Farmer John 知道每只奶牛都在各自喜欢的牧场（一个牧场不一定只有一头牛）。给出各头牛在的牧场和牧场间的路线，找出使所有牛到达的路程和最短的牧场（他将把糖放在那）。
### 输入格式
第一行包含三个整数n,p,c，分别表示奶牛数、牧场数和牧场间道路数。  
第二行到第n+1行，每行一个整数，其中第i行的整数表示第i−1头奶牛所在的牧场号。  
第n+2行到第N+C+1行，每行包含三个整数A,B,D，表示牧场号为A和B的两个牧场之间有一条长度为D的双向道路相连。
### 输出格式
输出一行一个整数，表示奶牛必须行走的最小的距离和。
### 样例
*输入：*  
```cpp
3 4 5
2
3
4
1 2 1
1 3 1
2 3 7
2 4 3
3 4 5
```
*输出：*  
```cpp
8
```
### 说明/提示
对于所有数据，1≤n≤500，2≤p≤800，1≤A,B≤p，1≤c≤1450，1≤D≤255。
### 样例解释
```cpp
          P2  
P1 @--1--@ C1
         |
         | 
       5  7  3
         |   
         |     C3
       C2 @--5--@
          P3    P4

```
把糖果放在4号牧场最优。
### 题目分析+做题过程
一开始哎呦还以为这就是一个简单的**最短路**问题，结果后面直接给整~~崩溃~~了……  
因为哎呦最新学习了SPFA最短路，所以哎呦干脆就**直接套用模板**写了一段代码  
e.g.：如果有听不懂的，建议上洛谷/一本通学习一下**最短路**再观看以下内容
这题的最短路部分并不是很复杂，唯一让哎呦感到**恶心**的是如何选择放置**糖果**的位置  
看着身边的同学都~~胸有成竹~~地敲起了代码，哎呦~~几乎快要当场晕厥了~~  
抱着试一试的心理，哎呦果断打了一段**暴力**：  
```cpp
for(int i = 1;i <= p;i++){
          int cnt = 0;
          for(int j = 1;j <= n;j++){
                    spfa(at[j]);
                    cnt += dis[i];
	}
	if(cnt < ret) ret = cnt;
}
```
然后，~~果不其然~~……  
![img1](https://aiyou945.github.io/image/img1.png)  
想要看如何**解决这个问题**？哎呦苦苦思索了两周，终于想到一个办法：  
**找一个~~大冤种~~同学借鉴答案！**  
于是，哎呦打开提交记录，随便找了一个同学的答案~~借鉴~~起来：  
![l1](https://aiyou945.github.io/image/l1.png)  
广告推销：该同学建造的网站：[piaoztsdy's blog](https://piaoztsdy.cn)  
经过深入研究，哎呦终于得出了答案：  
这个暴力不仅容易**超时**，在循环的时候~~居然连起点和终点都搞错了啊……~~  
简单描述一下**代码的“高”效率**：  
·原本只需要对每一个i跑1次SPFA（以`i`为起点），但哎呦当时可能~~一时激动~~，  
亿不小心就把O(PC)的时间复杂度飙到了**O(NPC)**（你确定这个复杂度是认真的？）  
还有，哎呦一开始定义数组的时候写了这么一段代码：  
```cpp
int dis[810],vis[2910]; //重点在这一行代码上
int head[810],to[2920],nxt[2920],w[2920],at[2920]; //用来链表建边的数组
```
已知一共只会有不到**800**个点的情况下，  
哎呦居然~~把vis数组直接开到了将近3000多……我说这不是我写的代码你信吗？~~  
终于，耗尽将近3周努力，哎呦写出了第一份修改版代码：    
```cpp
for(int i = 1;i <= p;i++){ //枚举防止糖果的位置
    spfa(i); //以i为起点，计算i到所有牧场的最短路
    int cnt = 0;
    for(int j = 1;j <= n;j++){
        cnt += dis[at[j]]; //记录i到奶牛所在牧场at[j]的距离
    }
    if(cnt < ret) ret = cnt; //取最小值成为答案
}
```
哎呦用颤抖的手按下了“提交代码”按钮，然后……  
一秒，两秒，三秒……  
![check](https://aiyou945.github.io/image/check.png)  
成功了！  
虽然大家在屏幕外看到的只是一小段简单的文字，  
但是一片“AC”闪现出来的时候，哎呦真的特别激动。  
虽然这道题对很多大佬来说只是一个简单的水题，没什么好说的……  
但哎呦还是很感谢~~能坚持到现在的你们……~~  
这篇帖子篇幅不长，到这里就结束了，如果想查看更多帖子，可以前往网页索引查看。  
我们下一个系列**不见不散！**  
最新更新时间：2025年12月18日20时
